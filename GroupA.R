## Loading Library ##
library(slam)
library(gurobi)

## Initial data generation ##

{
  #normal distribution, mean of 261 and sd = 45 to generate daily paitients over a week
  
  patients <-rnorm(7,261,45)
  
  #Shifts in a day
  Svec <- list(s1 = (0:8), 
               s2 = (6:14), 
               s3 = (12:20), 
               s4 = (16:24))
  #Number of days 
  Tvec <- 1:7
  #number of periods in a day
  Ivec <- list(i1 = (0:4), 
               i2 = (4:8), 
               i3 = (8:12), 
               i4 = (12:16), 
               i5 = (16:20), 
               i6 = (20:24))
  #type of doctor
  Dvec <- 1:3
  
  #Cost matrix -- each type of doctor per shift 
  Pmat<-matrix(c(434,1860, 1524,
                 289,1240,1016,
                 289,1240,1016,
                 289,1240,1016), nrow=length(Dvec), ncol = length(Svec))
  
  #demand per each period i in a day T
  Nmat<-matrix(0, nrow = length(Tvec), ncol = length(Ivec))
  
  generate_random_demand <- function(patients,Nmat) {
    for (i in 1:length(patients)) {
      random_numbers <- runif(6)
      normalized_numbers <- random_numbers / sum(random_numbers)
      scaled_numbers <- normalized_numbers * patients[i]
      Nmat[i,]<-round(scaled_numbers,0)
    }
    return(Nmat)
  }
  
  Nmat<-generate_random_demand(patients,Nmat)
  colnames(Nmat)<-c("i1","i2","i3","i4","i5","i6")
  
  #matrix to determine if shift s covers period i
  Amat<-matrix(0, nrow=length(Svec), ncol = length(Ivec))
  colnames(Amat)<-c("i1","i2","i3","i4","i5","i6")
  
  #filling up Amat
  for (i in 1:length(Ivec)){
    for (s in 1:length(Svec)){ 
      binary <- sum(unlist(Ivec[i]) %in% unlist(Svec[s]))
      if (as.numeric(binary) == 5){ 
        Amat[s, i] <- 1
      }
      else if (as.numeric(binary) == 3){ 
        Amat[s, i] <- 0.5
      }
      else{ 
        Amat[s, i] <- 0}
    }
  }
  
  #calculating demand for each shift
  demand<- matrix(0, nrow=length(Tvec), ncol = length(Svec))
  colnames(demand)<-c('s1' , 's2', 's3', 's4')
  
  for(t in 1:length(Tvec)){
    for(i in 1:length(Ivec)){
      for(s in 1:length(Svec)){
        demand[t,s]<- demand[t,s] + Nmat[t,i]*Amat[s,i]
      }
    }
  }
}

#### GUROBI MODEL ####
#creating the daily demand constraint, first creating the left hand side and then the corresponding right hand side
{
  gurobi_test <- function(){
    #constraint day 1 over all shifts
    {
      t1_s1<-c(1,0,0,0,1,0,0,0,1,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t1_s2 <-c(0,1,0,0,0,1,0,0,0,1,0,0,
                0,0,0,0,0,0,0,0,0,0,0,0,
                0,0,0,0,0,0,0,0,0,0,0,0,
                0,0,0,0,0,0,0,0,0,0,0,0,
                0,0,0,0,0,0,0,0,0,0,0,0,
                0,0,0,0,0,0,0,0,0,0,0,0,
                0,0,0,0,0,0,0,0,0,0,0,0)
      
      t1_s3<-c(0,0,1,0,0,0,1,0,0,0,1,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t1_s4<-c(0,0,0,1,0,0,0,1,0,0,0,1,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
    }
    
    #constraint day 2 over all shifts
    {
      t2_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               1,0,0,0,1,0,0,0,1,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t2_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,1,0,0,0,1,0,0,0,1,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t2_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,1,0,0,0,1,0,0,0,1,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t2_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,1,0,0,0,1,0,0,0,1,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
    }
    
    #constraint day 3 over all shifts
    {
      t3_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               1,0,0,0,1,0,0,0,1,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t3_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,1,0,0,0,1,0,0,0,1,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t3_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,1,0,0,0,1,0,0,0,1,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t3_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,1,0,0,0,1,0,0,0,1,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
    }
    
    #constraint day 4 over all shifts
    {
      t4_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               1,0,0,0,1,0,0,0,1,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t4_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,1,0,0,0,1,0,0,0,1,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t4_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,1,0,0,0,1,0,0,0,1,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t4_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,1,0,0,0,1,0,0,0,1,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
    }
    
    #constraint day 5 over all shifts
    {
      t5_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               1,0,0,0,1,0,0,0,1,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t5_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,1,0,0,0,1,0,0,0,1,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t5_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,1,0,0,0,1,0,0,0,1,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t5_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,1,0,0,0,1,0,0,0,1,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
    }
    
    #constraint day 6 over all shifts
    {
      t6_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               1,0,0,0,1,0,0,0,1,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t6_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,1,0,0,0,1,0,0,0,1,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t6_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,1,0,0,0,1,0,0,0,1,0,
               0,0,0,0,0,0,0,0,0,0,0,0)
      
      t6_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,1,0,0,0,1,0,0,0,1,
               0,0,0,0,0,0,0,0,0,0,0,0)
    }
    
    #constraint day 7 over all shifts
    {
      t7_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               1,0,0,0,1,0,0,0,1,0,0,0)
      
      t7_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,1,0,0,0,1,0,0,0,1,0,0)
      
      t7_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,1,0,0,0,1,0,0,0,1,0)
      
      t7_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,0,0,0,0,0,0,0,0,0,
               0,0,0,1,0,0,0,1,0,0,0,1)
    }
    
    #proportion constraint
    #nurses lower and upper bound
    #lower bound day 1 over all shifts
    {
      nurses_T1_s1<-c(1,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s2<-c(0,1,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s3<-c(0,0,1,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s4<-c(0,0,0,1,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #lower bound day 2 over all shifts
    {
      nurses_T2_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      1,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,1,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,1,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,1,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #lower bound day 3 over all shifts
    {
      nurses_T3_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      1,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,1,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,1,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,1,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #lower bound day 4 over all shifts
    {
      nurses_T4_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      1,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,1,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,1,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,1,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #lower bound day 5 over all shifts
    {
      nurses_T5_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      1,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,1,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,1,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,1,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #lower bound day 6 over all shifts
    {
      nurses_T6_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      1,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,1,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,1,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,1,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #lower bound day 7 over all shifts
    {
      nurses_T7_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      1,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T7_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,1,0,0,0,0,0,0,0,0,0,0)
      nurses_T7_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,1,0,0,0,0,0,0,0,0,0)
      nurses_T7_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,0,0,0,0,0,0,0,0,0,
                      0,0,0,1,0,0,0,0,0,0,0,0)
    }
    
    #nurses rhs lower
    #day 1 over all shifts
    {
      nurses_T1_s1_rhs_L<-c(0,0,0,0,1,0,0,0,1,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s2_rhs_L<-c(0,0,0,0,0,1,0,0,0,1,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s3_rhs_L<-c(0,0,0,0,0,0,1,0,0,0,1,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s4_rhs_L<-c(0,0,0,0,0,0,0,1,0,0,0,1,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 2 over all shifts
    {
      nurses_T2_s1_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,1,0,0,0,1,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s2_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,1,0,0,0,1,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s3_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,1,0,0,0,1,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s4_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,1,0,0,0,1,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 3 over all shifts
    {
      nurses_T3_s1_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,1,0,0,0,1,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s2_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,1,0,0,0,1,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s3_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,1,0,0,0,1,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s4_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,1,0,0,0,1,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 4 over all shifts
    {
      nurses_T4_s1_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,1,0,0,0,1,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s2_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,1,0,0,0,1,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s3_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,1,0,0,0,1,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s4_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,1,0,0,0,1,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 5 over all shifts
    {
      nurses_T5_s1_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,1,0,0,0,1,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s2_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,1,0,0,0,1,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s3_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,1,0,0,0,1,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s4_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,1,0,0,0,1,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 6 over all shifts
    {
      nurses_T6_s1_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,1,0,0,0,1,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s2_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,1,0,0,0,1,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s3_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,1,0,0,0,1,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s4_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,1,0,0,0,1,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 7 over all shifts
    {
      nurses_T7_s1_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,1,0,0,0,1,0,0,0)
      nurses_T7_s2_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,1,0,0,0,1,0,0)
      nurses_T7_s3_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,1,0,0,0,1,0)
      nurses_T7_s4_rhs_L<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,1,0,0,0,1)
    }
    
    #nurses rhs upper
    #day 1 over all shifts
    {
      nurses_T1_s1_rhs_U<-c(0,0,0,0,3,0,0,0,3,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s2_rhs_U<-c(0,0,0,0,0,3,0,0,0,3,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s3_rhs_U<-c(0,0,0,0,0,0,3,0,0,0,3,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T1_s4_rhs_U<-c(0,0,0,0,0,0,0,3,0,0,0,3,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 2 over all shifts
    {
      nurses_T2_s1_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,3,0,0,0,3,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s2_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,3,0,0,0,3,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s3_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,3,0,0,0,3,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T2_s4_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,3,0,0,0,3,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 3 over all shifts
    {
      nurses_T3_s1_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,3,0,0,0,3,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s2_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,3,0,0,0,3,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s3_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,3,0,0,0,3,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T3_s4_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,3,0,0,0,3,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 4 over all shifts
    {
      nurses_T4_s1_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,3,0,0,0,3,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s2_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,3,0,0,0,3,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s3_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,3,0,0,0,3,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T4_s4_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,3,0,0,0,3,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 5 over all shifts
    {
      nurses_T5_s1_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,3,0,0,0,3,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s2_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,3,0,0,0,3,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s3_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,3,0,0,0,3,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T5_s4_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,3,0,0,0,3,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 6 over all shifts
    {
      nurses_T6_s1_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,3,0,0,0,3,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s2_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,3,0,0,0,3,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s3_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,3,0,0,0,3,0,
                            0,0,0,0,0,0,0,0,0,0,0,0)
      nurses_T6_s4_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,3,0,0,0,3,
                            0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 7 over all shifts
    {
      nurses_T7_s1_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,3,0,0,0,3,0,0,0)
      nurses_T7_s2_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,3,0,0,0,3,0,0)
      nurses_T7_s3_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,3,0,0,0,3,0)
      nurses_T7_s4_rhs_U<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,0,0,0,0,0,
                            0,0,0,0,0,0,0,3,0,0,0,3)
    }
    
    
    #surgeon lower bound
    #day 1 over all shifts
    {
      surgeon_T1_s1<-c(0,0,0,0,1,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T1_s2<-c(0,0,0,0,0,1,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T1_s3<-c(0,0,0,0,0,0,1,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T1_s4<-c(0,0,0,0,0,0,0,1,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 2 over all shifts
    {
      surgeon_T2_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,1,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T2_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,1,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T2_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,1,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T2_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,1,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 3 over all shifts
    {
      surgeon_T3_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,1,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T3_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,1,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T3_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,1,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T3_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,1,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 4 over all shifts
    {
      surgeon_T4_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,1,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T4_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,1,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T4_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,1,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T4_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,1,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 5 over all shifts
    {
      surgeon_T5_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,1,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T5_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,1,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T5_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,1,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T5_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,1,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 6 over all shifts
    {
      surgeon_T6_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,1,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T6_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,1,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T6_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,1,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      surgeon_T6_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,1,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 7 over all shifts
    {
      surgeon_T7_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,1,0,0,0,0,0,0,0)
      surgeon_T7_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,1,0,0,0,0,0,0)
      surgeon_T7_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,1,0,0,0,0,0)
      surgeon_T7_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,1,0,0,0,0)
    }
    
    #general practitioners lower bound
    #day 1 over all shifts
    {
      general_T1_s1<-c(0,0,0,0,0,0,0,0,1,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T1_s2<-c(0,0,0,0,0,0,0,0,0,1,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T1_s3<-c(0,0,0,0,0,0,0,0,0,0,1,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T1_s4<-c(0,0,0,0,0,0,0,0,0,0,0,1,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 2 over all shifts
    {
      general_T2_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,1,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T2_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,1,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T2_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,1,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T2_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,1,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 3 over all shifts
    {
      general_T3_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,1,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T3_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,1,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T3_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,1,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T3_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,1,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 4 over all shifts
    {
      general_T4_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,1,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T4_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,1,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T4_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,1,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T4_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,1,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 5 over all shifts
    {
      general_T5_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,1,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T5_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,1,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T5_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,1,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T5_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,1,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 6 over all shifts
    {
      general_T6_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,1,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T6_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,1,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T6_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,1,0,
                       0,0,0,0,0,0,0,0,0,0,0,0)
      general_T6_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,1,
                       0,0,0,0,0,0,0,0,0,0,0,0)
    }
    #day 7 over all shifts
    {
      general_T7_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,1,0,0,0)
      general_T7_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,1,0,0)
      general_T7_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,1,0)
      general_T7_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,0,
                       0,0,0,0,0,0,0,0,0,0,0,1)
    }
    
    model<-list()
    model$A<-rbind(
      #demand
      t1_s1,t1_s2,t1_s3,t1_s4,
      t2_s1,t2_s2,t2_s3,t2_s4,
      t3_s1,t3_s2,t3_s3,t3_s4,
      t4_s1,t4_s2,t4_s3,t4_s4,
      t5_s1,t5_s2,t5_s3,t5_s4,
      t6_s1,t6_s2,t6_s3,t6_s4,
      t7_s1,t7_s2,t7_s3,t7_s4,
      
      #nurses lower
      nurses_T1_s1 - nurses_T1_s1_rhs_L,
      nurses_T1_s2 - nurses_T1_s2_rhs_L,
      nurses_T1_s3 - nurses_T1_s3_rhs_L,
      nurses_T1_s4 - nurses_T1_s4_rhs_L,
      nurses_T2_s1 - nurses_T2_s1_rhs_L,
      nurses_T2_s2 - nurses_T2_s2_rhs_L,
      nurses_T2_s3 - nurses_T2_s3_rhs_L,
      nurses_T2_s4 - nurses_T2_s4_rhs_L,
      nurses_T3_s1 - nurses_T3_s1_rhs_L,
      nurses_T3_s2 - nurses_T3_s2_rhs_L,
      nurses_T3_s3 - nurses_T3_s3_rhs_L,
      nurses_T3_s4 - nurses_T3_s4_rhs_L,
      nurses_T4_s1 - nurses_T4_s1_rhs_L,
      nurses_T4_s2 - nurses_T4_s2_rhs_L,
      nurses_T4_s3 - nurses_T4_s3_rhs_L,
      nurses_T4_s4 - nurses_T4_s4_rhs_L,
      nurses_T5_s1 - nurses_T5_s1_rhs_L,
      nurses_T5_s2 - nurses_T5_s2_rhs_L,
      nurses_T5_s3 - nurses_T5_s3_rhs_L,
      nurses_T5_s4 - nurses_T5_s4_rhs_L,
      nurses_T6_s1 - nurses_T6_s1_rhs_L,
      nurses_T6_s2 - nurses_T6_s2_rhs_L,
      nurses_T6_s3 - nurses_T6_s3_rhs_L,
      nurses_T6_s4 - nurses_T6_s4_rhs_L,
      nurses_T7_s1 - nurses_T7_s1_rhs_L,
      nurses_T7_s2 - nurses_T7_s2_rhs_L,
      nurses_T7_s3 - nurses_T7_s3_rhs_L,
      nurses_T7_s4 - nurses_T7_s4_rhs_L,
      #nurses upper
      nurses_T1_s1 - nurses_T1_s1_rhs_U,
      nurses_T1_s2 - nurses_T1_s2_rhs_U,
      nurses_T1_s3 - nurses_T1_s3_rhs_U,
      nurses_T1_s4 - nurses_T1_s4_rhs_U,
      nurses_T2_s1 - nurses_T2_s1_rhs_U,
      nurses_T2_s2 - nurses_T2_s2_rhs_U,
      nurses_T2_s3 - nurses_T2_s3_rhs_U,
      nurses_T2_s4 - nurses_T2_s4_rhs_U,
      nurses_T3_s1 - nurses_T3_s1_rhs_U,
      nurses_T3_s2 - nurses_T3_s2_rhs_U,
      nurses_T3_s3 - nurses_T3_s3_rhs_U,
      nurses_T3_s4 - nurses_T3_s4_rhs_U,
      nurses_T4_s1 - nurses_T4_s1_rhs_U,
      nurses_T4_s2 - nurses_T4_s2_rhs_U,
      nurses_T4_s3 - nurses_T4_s3_rhs_U,
      nurses_T4_s4 - nurses_T4_s4_rhs_U,
      nurses_T5_s1 - nurses_T5_s1_rhs_U,
      nurses_T5_s2 - nurses_T5_s2_rhs_U,
      nurses_T5_s3 - nurses_T5_s3_rhs_U,
      nurses_T5_s4 - nurses_T5_s4_rhs_U,
      nurses_T6_s1 - nurses_T6_s1_rhs_U,
      nurses_T6_s2 - nurses_T6_s2_rhs_U,
      nurses_T6_s3 - nurses_T6_s3_rhs_U,
      nurses_T6_s4 - nurses_T6_s4_rhs_U,
      nurses_T7_s1 - nurses_T7_s1_rhs_U,
      nurses_T7_s2 - nurses_T7_s2_rhs_U,
      nurses_T7_s3 - nurses_T7_s3_rhs_U,
      nurses_T7_s4 - nurses_T7_s4_rhs_U,
      #surgeon
      surgeon_T1_s1,surgeon_T1_s2,surgeon_T1_s3,surgeon_T1_s4,
      surgeon_T2_s1,surgeon_T2_s2,surgeon_T2_s3,surgeon_T2_s4,
      surgeon_T3_s1,surgeon_T3_s2,surgeon_T3_s3,surgeon_T3_s4,
      surgeon_T4_s1,surgeon_T4_s2,surgeon_T4_s3,surgeon_T4_s4,
      surgeon_T5_s1,surgeon_T5_s2,surgeon_T5_s3,surgeon_T5_s4,
      surgeon_T6_s1,surgeon_T6_s2,surgeon_T6_s3,surgeon_T6_s4,
      surgeon_T7_s1,surgeon_T7_s2,surgeon_T7_s3,surgeon_T7_s4,
      #general practitioner
      general_T1_s1,general_T1_s2,general_T1_s3,general_T1_s4,
      general_T2_s1,general_T2_s2,general_T2_s3,general_T2_s4,
      general_T3_s1,general_T3_s2,general_T3_s3,general_T3_s4,
      general_T4_s1,general_T4_s2,general_T4_s3,general_T4_s4,
      general_T5_s1,general_T5_s2,general_T5_s3,general_T5_s4,
      general_T6_s1,general_T6_s2,general_T6_s3,general_T6_s4,
      general_T7_s1,general_T7_s2,general_T7_s3,general_T7_s4
    )
    model$obj<-rep(c(
      Pmat[1,1],Pmat[1,2], Pmat[1,3],Pmat[1,4],
      Pmat[2,1],Pmat[2,2],Pmat[2,3],Pmat[2,4],
      Pmat[3,1],Pmat[3,2],Pmat[3,3],Pmat[3,4]
    ),7)
    model$modelsense<-"min"
    model$rhs<-c(
      #demand
      demand[1,1]/2,demand[1,2]/2,demand[1,3]/2,demand[1,4]/2,
      demand[2,1]/2,demand[2,2]/2,demand[2,3]/2,demand[2,4]/2,
      demand[3,1]/2,demand[3,2]/2,demand[3,3]/2,demand[3,4]/2,
      demand[4,1]/2,demand[4,2]/2,demand[4,3]/2,demand[4,4]/2,
      demand[5,1]/2,demand[5,2]/2,demand[5,3]/2,demand[5,4]/2,
      demand[6,1]/2,demand[6,2]/2,demand[6,3]/2,demand[6,4]/2,
      demand[7,1]/2,demand[7,2]/2,demand[7,3]/2,demand[7,4]/2,
      #nurses lower
      rep(0,28),
      #nurses upper
      rep(0,28),
      #surgeon
      3,5,5,5,
      3,5,5,5,
      3,5,5,5,
      3,5,5,5,
      3,5,5,5,
      3,5,5,5,
      3,5,5,5,
      #general practitioners
      demand[1,1]/15,demand[1,2]/15,demand[1,3]/15,demand[1,4]/15,
      demand[2,1]/15,demand[2,2]/15,demand[2,3]/15,demand[2,4]/15,
      demand[3,1]/15,demand[3,2]/15,demand[3,3]/15,demand[3,4]/15,
      demand[4,1]/15,demand[4,2]/15,demand[4,3]/15,demand[4,4]/15,
      demand[5,1]/15,demand[5,2]/15,demand[5,3]/15,demand[5,4]/15,
      demand[6,1]/15,demand[6,2]/15,demand[6,3]/15,demand[6,4]/15,
      demand[7,1]/15,demand[7,2]/15,demand[7,3]/15,demand[7,4]/15
    )
    
    model$sense<-c(
      rep(">", 28), # Demand
      rep(">", 28), # Nurses lower bound
      rep("<", 28), # Nurses upper bound
      rep(">", 28), # Surgeon
      rep(">", 28)  # General practitioners
    )
    model$vtype<-"C"
    params<-list(OutputFlag=0)
    result<-gurobi(model,params)
    print('Solution:')
    print(result$objval)
    print(result$x)
  }
  gurobi_test()
}
### GREEDY ALGORITHM ###
{
  Min_x2_night <- 3
  Min_x2_day <- 5
  gp_patients <- 15
  
  # Function to solve with the greedy algorithm 
  greedy <- function(p, Svec, Tvec, n){
    # Setting the matrix to store the solution
    total_cost <- matrix(0, nrow = length(Tvec), ncol = length(Svec))
    x1 <- matrix(0, nrow = length(Tvec), ncol = length(Svec))
    x2 <- matrix(0, nrow = length(Tvec), ncol = length(Svec))
    x3 <- matrix(0, nrow = length(Tvec), ncol = length(Svec))
    
    for (t in 1:length(Tvec)) {
      for (s in 1:length(Svec)) {
        
        # Assign surgeons (most expensive)
        x2[t, 1] <- Min_x2_night
        x2[t, 2:length(Svec)] <- Min_x2_day
        
        # Assign general practitioners
        x3[t, s] <- ceiling(demand[t, s]/gp_patients)
        
        # Assign nurses (cheapest)
        x1[t, s] <- sum(x2[t, s], x3[t, s])
        if (sum(x1[t, s], x2[t, s], x3[t, s]) >= ceiling(n[t,s]/2)) {
          next 
        }
        else {
          # Add nurses if the demand is still unanswered, as long as it respects 
          # the proportion constraint, otherwise add a general practitioner
          while(sum(x1[t, s], x2[t, s], x3[t, s]) < ceiling(n[t,s]/2)) {
            if (x1[t, s] < 3*sum(x2[t, s], x3[t, s])) {
              x1[t, s] <- x1[t, s] + 1
            }
            else {
              x3[t, s] <- x3[t, s] + 1
            }
          }
        }
      }
    }   
    #Compute cost per shift
    for (t in 1:length(Tvec)) {
      for (s in 1:length(Svec)) { 
        shift_cost_x1 <- x1[t, s]* p[1, s]
        shift_cost_x2 <- x2[t, s]* p[2, s]
        shift_cost_x3 <- x3[t, s]* p[3, s]
        total_cost[t,s] <- shift_cost_x1 + shift_cost_x2 + shift_cost_x3
      }
    }
    return(list (total_cost = total_cost, x1 = x1, x2 = x2, x3 = x3))
  }
  
  result_greedy <- greedy(Pmat, Svec, Tvec, demand)
}
### DYNAMIC PROGRAMMING ###

{ 
  costs <- c(289,1016, 1240)
  demand_dp <- 100
  num_doctors <- length(costs)
  min_x2 <- ceiling(demand_dp/15)
  min_x3 <- 5
  min_x <- ceiling(demand_dp/2)
  
  # Constraints
  # 3*(gps+surgeons) - nurses >= 0
  # gps + surgeons + nurses - min_x >= 0
  # gps >= min_x2
  # surgeons >= min_x3
  #
  # Objective
  # Min nurses * costs[1] + gps * costs[2] + surgeons * costs[3]
  #
  # Initial feasible solution
  # nurses = demand
  # gps = demand
  # surgeons = demand
  #
  # Initial value of the objective
  # 3*demand
  #
  # Initial value of the constraints
  # 5*demand
  # 3*demand - minx_x
  #
  # Maximal value of the constraints when we decrease the numbers throughout the execution
  # 6*demand (if nurses=0, gps=surgeons=demand)
  # 3*demand - min_x
  #
  # Theses values determine the number of rows and columns of our matrix since each row
  # corresponds to a value of the first constraint (from 0 to 6*demand) and each column
  # corresponds to a value of the second constraint (from 0 to 3*demand-min_x)
  nrow <- 6*demand_dp + 1
  ncol <- 3*demand_dp - min_x + 1
  
}
{
  solveDP <- function() {
    dp <- matrix(demand_dp*sum(costs), nrow = nrow, ncol = ncol)
    for (t in num_doctors:1) {
      dp2 <- dp
      for (row in 1:nrow) {
        for (col in 1:ncol){
          # n is the number of doctors we remove
          for (n in 1:demand_dp) {
            if (t==1 & row > n & col+n <= ncol){
              # We potentially remove n nurses
              dp2[row,col] <- min(dp[row,col], dp[row-n,col+n] - n*costs[t])
            }
            else if (t==2 & n <= (demand_dp - min_x2) & row + (3*n) <= nrow & col+n <= ncol){
              # We potentially remove n doctors
              # We ensure the constraint demand - n >= min_x2
              dp2[row,col] <- min(dp[row,col], dp[row+(3*n),col+n] - n*costs[t])
            }
            else if (t==3 & n <= (demand_dp - min_x3) & row + (3*n) <= nrow & col+n <= ncol) {
              # We potentially remove n surgeons
              # We ensure the constraint demand - n >= min_x3
              dp2[row,col] <- min(dp[row,col], dp[row+3*n,col+n] - n*costs[t])
            }
          }
        }
      }
      dp <- dp2
    }
    return(dp)
  }
  dp <- solveDP()
  row <- 1
  col <- 1
  best <- dp[1,1]
  
  for(i in 1:nrow) {
    for(j in 1:ncol) {
      if(dp[i,j] < best) {
        row <- i
        col <- j
        best <- dp[i,j]
      }
    }
  }
  # Optimal value
  print(dp[row,col])
  
  selected_doctor <- c(demand_dp,demand_dp,demand_dp)
  for (t in 1:length(costs)) {
    for (n in demand_dp:1) {
      if (t==1 & row>n & col+n<=ncol){
        if (dp[row,col] == dp[row-n,col+n] - n*costs[t]) {
          selected_doctor[t] <- demand_dp - n
          row <- row-n
          col <- col+n
          break
        }
      }
      else if (t==2 & n <= (demand_dp - min_x2) & row + (3*n) <= nrow & col+n <= ncol){
        if (dp[row,col] ==  dp[row+(3*n),col+n] - n*costs[t]) {
          selected_doctor[t] <- demand_dp-n
          row <- row+3*n
          col <- col+n
          break
        }
      }
      else if (t==3 & n <= (demand_dp - min_x3) & row + (3*n) <= nrow & col+n <= ncol) {
        if (dp[row,col] ==  dp[row+(3*n),col+n] - n*costs[t]) {
          selected_doctor[t] <- demand_dp-n
          row <- row+3*n
          col <- col+n
          break
        }
      }
    }
  }
  print(selected_doctor)
}

#### MONTECARLO SIMULATION ####
n_simulations <- 10

result_greedy_sim <- list()


for (k in 1:n_simulations){ 
  #data generation for simulation
  {
    patients <-rnorm(7,261,45)  
    #Shifts in a day
    Svec <- list(s1 = (0:8), 
                 s2 = (6:14), 
                 s3 = (12:20), 
                 s4 = (16:24))
    #type of doctor
    Dvec <- 1:3
    means <- c(289,1240,1016) #mean wage per doctor type
    stds <- c(102, 300, 270) #std wages
    
    Pmat <- matrix(0, nrow = length(Dvec), ncol = length(Svec))
    
    for (i in 1:length(Dvec)) {
      for (j in 1:length(Svec)) {
        # Sample from normal distribution
        value <- rnorm(1, mean = means[i], sd = stds[i])
        
        # Multiply the first column by 1.5
        if (j == 1) {
          value <- value * 1.5
        }
        
        # Assign value to Pmat
        Pmat[i, j] <- value
      }
    }
    Nmat<-matrix(0, nrow = length(Tvec), ncol = length(Ivec))
    
    generate_random_demand <- function(patients,Nmat) {
      for (i in 1:length(patients)) {
        random_numbers <- runif(6)
        normalized_numbers <- random_numbers / sum(random_numbers)
        scaled_numbers <- normalized_numbers * patients[i]
        Nmat[i,]<-round(scaled_numbers,0)
      }
      return(Nmat)
    }
    
    Nmat<-generate_random_demand(patients,Nmat)
    colnames(Nmat)<-c("i1","i2","i3","i4","i5","i6")
    
    #matrix to determine if shift s covers period i
    Amat<-matrix(0, nrow=length(Svec), ncol = length(Ivec))
    colnames(Amat)<-c("i1","i2","i3","i4","i5","i6")
    
    #filling up Amat
    for (i in 1:length(Ivec)){
      for (s in 1:length(Svec)){ 
        binary <- sum(unlist(Ivec[i]) %in% unlist(Svec[s]))
        if (as.numeric(binary) == 5){ 
          Amat[s, i] <- 1
        }
        else if (as.numeric(binary) == 3){ 
          Amat[s, i] <- 0.5
        }
        else{ 
          Amat[s, i] <- 0}
      }
    }
    #calculating demand for each shift
    demand<- matrix(0, nrow=length(Tvec), ncol = length(Svec))
    colnames(demand)<-c('s1' , 's2', 's3', 's4')
    
    for(t in 1:length(Tvec)){
      for(i in 1:length(Ivec)){
        for(s in 1:length(Svec)){
          demand[t,s]<- demand[t,s] + Nmat[t,i]*Amat[s,i]
        }
      }
    }
  }
  
  
  #### Gurobi simulation ####
  print(k)
  gurobi_test()
  
  #### Greedy simulation ####
  
  result_greedy_sim[[k]] <- greedy(Pmat, Svec, Tvec, demand)
}

#### Dynamic Simulation ####
result_dp_sim <- list()

#making sure that every demand per shift is rounded
demand_dp_sim<- matrix(0, nrow=length(Tvec), ncol = length(Svec))
{
  colnames(demand_dp_sim)<-c('s1' , 's2', 's3', 's4')
  
  for(t in 1:length(Tvec)){
    for(i in 1:length(Ivec)){
      for(s in 1:length(Svec)){
        demand_dp_sim[t,s]<- ceiling(demand_dp_sim[t,s] + Nmat[t,i]*Amat[s,i])
      }
    }
  }
}
for (k in 1:n_simulations){
  #data generation for simulation
  {
    costs <- c(ceiling(rnorm(1, 289, 102)), ceiling(rnorm(1, 1016, 270)),ceiling(rnorm(1, 1240, 300)))
    num_doctors <- length(costs)
    random_t <- ceiling(runif(1, 1, 7))
    random_s <- ceiling(runif(1, 1, 4))
    demand_sim <- as.numeric(demand_dp_sim[random_t, random_s])
    min_x2 <- ceiling(demand_sim/15)
    min_x3 <- 5
    min_x <- ceiling(demand_sim/2)
    nrow <- 6*demand_sim + 1
    ncol <- 3*demand_sim - min_x + 1
  }
  #function to find optimal value and amount of doctors selected 
  {
    solveDP_sim <- function() {
      dp <- matrix(demand_sim*sum(costs), nrow = nrow, ncol = ncol)
      for (t in num_doctors:1) {
        dp2 <- dp
        for (row in 1:nrow) {
          for (col in 1:ncol){
            # n is the number of doctors we remove
            for (n in 1:demand_sim) {
              if (t==1 & row > n & col+n <= ncol){
                # We potentially remove n nurses
                dp2[row,col] <- min(dp[row,col], dp[row-n,col+n] - n*costs[t])
              }
              else if (t==2 & n <= (demand_sim - min_x2) & row + (3*n) <= nrow & col+n <= ncol){
                # We potentially remove n doctors
                # We ensure the constraint demand - n >= min_x2
                dp2[row,col] <- min(dp[row,col], dp[row + (3*n),col+n] - n*costs[t])
              }
              else if (t==3 & n <= (demand_sim - min_x3) & row + (3*n) <= nrow & col+n <= ncol) {
                # We potentially remove n surgeons
                # We ensure the constraint demand - n >= min_x3
                dp2[row,col] <- min(dp[row,col], dp[row+3*n,col+n] - n*costs[t])
              }
            }
          }
        }
        dp <- dp2
      }
      return(dp)
    }
    
    dp_simulated <- solveDP_sim()
    
    row <- 1
    col <- 1
    best_sim <- dp_simulated[1,1]
    
    for(i in 1:nrow) {
      for(j in 1:ncol) {
        if(dp_simulated[i,j] < best_sim) {
          row <- i
          col <- j
          best_sim <- dp_simulated[i,j]
        }
      }
    }
    # Optimal value
    print(demand_sim)
    optimal_val <- print(dp_simulated[row,col])
    
    selected_doctor_dp <- c(demand_sim,demand_sim,demand_sim)
    for (t in 1:length(costs)) {
      
      for (n in demand_sim:1) {
        if (t==1 & row > n & col+n <= ncol){
          if (dp_simulated[row,col] == dp_simulated[row-n,col+n] - n*costs[t]) {
            selected_doctor_dp[t] <- demand_sim - n
            row <- row-n
            col <- col+n
            break
          }
        }
        else if (t==2 & n <= (demand_sim - min_x2) & row + (3*n) <= nrow & col+n <= ncol){
          if (dp_simulated[row,col] ==  dp_simulated[row+(3*n),col+n] - n*costs[t]) {
            selected_doctor_dp[t] <- demand_sim - n
            row <- row+3*n
            col <- col+n
            break
          }
        }
        else if (t==3 & n <= (demand_sim - min_x3) & row + (3*n) <= nrow & col+n <= ncol) {
          if (dp_simulated[row,col] ==  dp_simulated[row+(3*n),col+n] - n*costs[t]) {
            selected_doctor_dp[t] <- demand_sim - n
            row <- row+3*n
            col <- col+n
            break
          }
        }
      }
    }
    print(selected_doctor_dp)
  }
  result_dp_sim[[k]] <- c(demand_sim = demand_sim, optimal_val = optimal_val,selected_doctor_dp = selected_doctor_dp)
}

#calculating average number of nurses,surgeons and general practitioners for the recommendations
average_nurse<-0
for(a in 1:length(result_greedy_sim)){
  average_nurse<-unlist(mean(unlist(result_greedy_sim[[a]]$x1)))+average_nurse
}
average_nurse <- average_nurse/length(result_greedy_sim)

average_surgeon<-0
for(a in 1:length(result_greedy_sim)){
  average_surgeon<-unlist(mean(unlist(result_greedy_sim[[a]]$x2)))+average_surgeon
}
average_surgeon <- average_surgeon/length(result_greedy_sim)

average_gp<-0
for(a in 1:length(result_greedy_sim)){
  average_gp<-unlist(mean(unlist(result_greedy_sim[[a]]$x3)))+average_gp
}
average_gp <- average_gp/length(result_greedy_sim)
